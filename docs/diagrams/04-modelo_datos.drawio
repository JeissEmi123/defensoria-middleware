<mxfile host="app.diagrams.net" modified="2025-11-24T04:00:00.000Z" agent="Gemini Final" version="22.1.11">
  <diagram id="final-schema" name="Modelo de Datos Final">
    <mxGraphModel dx="2034" dy="1348" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Tabla: usuarios -->
        <mxCell id="table-usuarios" value="usuarios" style="shape=swimlane;startSize=32;fontStyle=1;align=center;verticalAlign=middle;fontSize=14;fontFamily=Helvetica;fillColor=#2980B9;strokeColor=#2471A3;fontColor=#FFFFFF;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="500" y="200" width="360" height="380" as="geometry" />
        </mxCell>
        <mxCell id="fields-usuarios" value="
          &lt;table style=&quot;width:100%;border-collapse: collapse;&quot;&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;&lt;b&gt;id&lt;/b&gt; &lt;i&gt;PK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;email &lt;i&gt;UNIQUE&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(255)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;username &lt;i&gt;UNIQUE&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(100)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;password_hash&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(255)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;nombre&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(100)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;apellido&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(100)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;activo&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;BIT&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;bloqueado&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;BIT&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;intentos_fallidos&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;ultimo_bloqueo_at&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;DATETIME&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;created_at&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;DATETIME&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;updated_at&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;DATETIME&lt;/td&gt;&lt;/tr&gt;
          &lt;/table&gt;" style="shape=none;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Consolas;" vertex="1" parent="table-usuarios">
          <mxGeometry y="32" width="360" height="348" as="geometry" />
        </mxCell>

        <!-- Tabla: roles -->
        <mxCell id="table-roles" value="roles" style="shape=swimlane;startSize=32;fontStyle=1;align=center;verticalAlign=middle;fontSize=14;fontFamily=Helvetica;fillColor=#2980B9;strokeColor=#2471A3;fontColor=#FFFFFF;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1000" y="40" width="360" height="190" as="geometry" />
        </mxCell>
        <mxCell id="fields-roles" value="
          &lt;table style=&quot;width:100%;border-collapse: collapse;&quot;&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;&lt;b&gt;id&lt;/b&gt; &lt;i&gt;PK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;nombre &lt;i&gt;UNIQUE&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(100)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;descripcion&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(255)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;activo&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;BIT&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;created_at&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;DATETIME&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;updated_at&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;DATETIME&lt;/td&gt;&lt;/tr&gt;
          &lt;/table&gt;" style="shape=none;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Consolas;" vertex="1" parent="table-roles">
          <mxGeometry y="32" width="360" height="158" as="geometry" />
        </mxCell>

        <!-- Tabla: permisos -->
        <mxCell id="table-permisos" value="permisos" style="shape=swimlane;startSize=32;fontStyle=1;align=center;verticalAlign=middle;fontSize=14;fontFamily=Helvetica;fillColor=#2980B9;strokeColor=#2471A3;fontColor=#FFFFFF;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1500" y="40" width="360" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fields-permisos" value="
          &lt;table style=&quot;width:100%;border-collapse: collapse;&quot;&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;&lt;b&gt;id&lt;/b&gt; &lt;i&gt;PK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;codigo &lt;i&gt;UNIQUE&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(100)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;nombre&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(100)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;descripcion&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(255)&lt;/td&gt;&lt;/tr&gt;
          &lt;/table&gt;" style="shape=none;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Consolas;" vertex="1" parent="table-permisos">
          <mxGeometry y="32" width="360" height="98" as="geometry" />
        </mxCell>

        <!-- Tabla: usuarios_roles -->
        <mxCell id="table-usuarios_roles" value="usuarios_roles" style="shape=swimlane;startSize=32;fontStyle=1;align=center;verticalAlign=middle;fontSize=14;fontFamily=Helvetica;fillColor=#95A5A6;strokeColor=#7F8C8D;fontColor=#FFFFFF;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1000" y="300" width="360" height="100" as="geometry" />
        </mxCell>
        <mxCell id="fields-usuarios_roles" value="
          &lt;table style=&quot;width:100%;border-collapse: collapse;&quot;&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;&lt;b&gt;id&lt;/b&gt; &lt;i&gt;PK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;color:#2980B9;&quot;&gt;usuario_id &lt;i&gt;FK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;color:#2980B9;&quot;&gt;rol_id &lt;i&gt;FK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
          &lt;/table&gt;" style="shape=none;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Consolas;" vertex="1" parent="table-usuarios_roles">
          <mxGeometry y="32" width="360" height="68" as="geometry" />
        </mxCell>

        <!-- Tabla: roles_permisos -->
        <mxCell id="table-roles_permisos" value="roles_permisos" style="shape=swimlane;startSize=32;fontStyle=1;align=center;verticalAlign=middle;fontSize=14;fontFamily=Helvetica;fillColor=#95A5A6;strokeColor=#7F8C8D;fontColor=#FFFFFF;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="1500" y="230" width="360" height="100" as="geometry" />
        </mxCell>
        <mxCell id="fields-roles_permisos" value="
          &lt;table style=&quot;width:100%;border-collapse: collapse;&quot;&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;&lt;b&gt;id&lt;/b&gt; &lt;i&gt;PK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;color:#2980B9;&quot;&gt;rol_id &lt;i&gt;FK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;color:#2980B9;&quot;&gt;permiso_id &lt;i&gt;FK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
          &lt;/table&gt;" style="shape=none;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Consolas;" vertex="1" parent="table-roles_permisos">
          <mxGeometry y="32" width="360" height="68" as="geometry" />
        </mxCell>

        <!-- Tabla: sesiones -->
        <mxCell id="table-sesiones" value="sesiones" style="shape=swimlane;startSize=32;fontStyle=1;align=center;verticalAlign=middle;fontSize=14;fontFamily=Helvetica;fillColor=#2980B9;strokeColor=#2471A3;fontColor=#FFFFFF;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="100" y="650" width="360" height="220" as="geometry" />
        </mxCell>
        <mxCell id="fields-sesiones" value="
          &lt;table style=&quot;width:100%;border-collapse: collapse;&quot;&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;&lt;b&gt;id&lt;/b&gt; &lt;i&gt;PK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;color:#2980B9;&quot;&gt;usuario_id &lt;i&gt;FK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;token &lt;i&gt;UNIQUE&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(500)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;ip_address&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(45)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;user_agent&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(MAX)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;expires_at&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;DATETIME&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;activa&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;BIT&lt;/td&gt;&lt;/tr&gt;
          &lt;/table&gt;" style="shape=none;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Consolas;" vertex="1" parent="table-sesiones">
          <mxGeometry y="32" width="360" height="188" as="geometry" />
        </mxCell>

        <!-- Tabla: password_reset_tokens -->
        <mxCell id="table-password_reset_tokens" value="password_reset_tokens" style="shape=swimlane;startSize=32;fontStyle=1;align=center;verticalAlign=middle;fontSize=14;fontFamily=Helvetica;fillColor=#2980B9;strokeColor=#2471A3;fontColor=#FFFFFF;whiteSpace=wrap;" vertex="1" parent="1">
            <mxGeometry x="500" y="650" width="360" height="190" as="geometry" />
        </mxCell>
        <mxCell id="fields-password_reset_tokens" value="
          &lt;table style=&quot;width:100%;border-collapse: collapse;&quot;&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;&lt;b&gt;id&lt;/b&gt; &lt;i&gt;PK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;color:#2980B9;&quot;&gt;usuario_id &lt;i&gt;FK&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;INTEGER&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;token &lt;i&gt;UNIQUE&lt;/i&gt;&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;VARCHAR(255)&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;expires_at&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;DATETIME&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;usado&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;BIT&lt;/td&gt;&lt;/tr&gt;
            &lt;tr&gt;&lt;td style=&quot;padding:4px;&quot;&gt;cancelado&lt;/td&gt;&lt;td style=&quot;padding:4px;text-align:right;color:#555;&quot;&gt;BIT&lt;/td&gt;&lt;/tr&gt;
          &lt;/table&gt;" style="shape=none;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Consolas;" vertex="1" parent="table-password_reset_tokens">
            <mxGeometry y="32" width="360" height="158" as="geometry" />
        </mxCell>
        
        <!-- Relaciones -->
        <mxCell id="rel-usuarios-usuarios_roles" value="" style="edgeStyle=entityRelationEdgeStyle;endArrow=ERoneToMany;startArrow=ERmandOne;html=1;rounded=0;strokeColor=#707070;strokeWidth=1.5;" edge="1" parent="1" source="table-usuarios" target="table-usuarios_roles">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-roles-usuarios_roles" value="" style="edgeStyle=entityRelationEdgeStyle;endArrow=ERoneToMany;startArrow=ERmandOne;html=1;rounded=0;strokeColor=#707070;strokeWidth=1.5;" edge="1" parent="1" source="table-roles" target="table-usuarios_roles">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-roles-roles_permisos" value="" style="edgeStyle=entityRelationEdgeStyle;endArrow=ERoneToMany;startArrow=ERmandOne;html=1;rounded=0;strokeColor=#707070;strokeWidth=1.5;" edge="1" parent="1" source="table-roles" target="table-roles_permisos">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-permisos-roles_permisos" value="" style="edgeStyle=entityRelationEdgeStyle;endArrow=ERoneToMany;startArrow=ERmandOne;html=1;rounded=0;strokeColor=#707070;strokeWidth=1.5;" edge="1" parent="1" source="table-permisos" target="table-roles_permisos">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-usuarios-sesiones" value="" style="edgeStyle=entityRelationEdgeStyle;endArrow=ERoneToMany;startArrow=ERmandOne;html=1;rounded=0;strokeColor=#707070;strokeWidth=1.5;" edge="1" parent="1" source="table-usuarios" target="table-sesiones">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-usuarios-password_reset_tokens" value="" style="edgeStyle=entityRelationEdgeStyle;endArrow=ERoneToMany;startArrow=ERmandOne;html=1;rounded=0;strokeColor=#707070;strokeWidth=1.5;" edge="1" parent="1" source="table-usuarios" target="table-password_reset_tokens">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>